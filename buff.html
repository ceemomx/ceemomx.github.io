<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>steam到buff计算器</title>
  </head>
  <body>
    <div>
      <h3>回报计算</h3>
      充值折扣<input id="zk" /> <br />
      steam购得单价<input id="dj" />

      <br />
      steam购买数量<input id="sl" /><br />
      buff售卖单价<input id="mj" /><br />
      <button id="js">计算</button>
      <button id="tj2">给出推荐steam单价</button>
      <button id="tb1">同步单价到挂刀</button>
      <p id="res"></p>
      <p id="tj"></p>
    </div>
    <div>
      <h3>反挂刀计算</h3>
      buff单价<input id="buffdj" />
      <br />
      购买数量<input id="gmsl" />
      <br />
      steam求购价<input id="steamqg" />
      <br />
      <button id="js2">计算</button>
      <button id="tb2">同步单价到回报</button>
      <button id="tb3">同步折扣到回报</button>
      <p id="res2"></p>
    </div>
  </body>
</html>
<script>
  function ele(id) {
    return document.getElementById(id)
  }

  function val(id) {
    return document.getElementById(id).value
  }

  ele("zk").value = 0.7
  ele("sl").value = 1
  ele("gmsl").value = 1

  ele("js").onclick = function () {
    let cost = val("dj") * val("sl")
    let earn = val("sl") * val("mj")
    let useBj = cost * val("zk")
    let rate = (earn - useBj) / useBj
    ele("res").innerHTML = `消耗steam余额￥${cost.toFixed(
      5
    )} <br /> 需要本金￥${useBj.toFixed(5)} <br /> 获取￥${earn.toFixed(
      5
    )} <br /> 利润￥${(earn - useBj).toFixed(5)} <br /> 利润率${(
      rate * 100
    ).toFixed(5)}%`
  }
  ele("tj2").onclick = function () {
    let lower = val("mj") / val("zk")
    ele("tj").innerHTML = `推荐steam购得单价低于${lower}`
  }
  ele("js2").onclick = function () {
    let zj = val("buffdj") * val("gmsl")
    let hqje = val("steamqg") * 0.85 * val("gmsl")
    let zk = zj / hqje
    ele("res2").innerHTML = `需要本金￥${zj.toFixed(
      5
    )} <br /> steam获得余额￥${hqje.toFixed(5)} <br /> 赚取￥${(
      hqje - zj
    ).toFixed(5)} <br /> 折扣${zk.toFixed(3)} `
  }

  ele("tb1").onclick = function () {
    ele("steamqg").value = val("dj")
    ele("buffdj").value = val("mj")
  }

  ele("tb2").onclick = function () {
    ele("dj").value = val("steamqg")
    ele("mj").value = val("buffdj")
  }

  ele("tb3").onclick = function () {
    let zj = val("buffdj") * val("gmsl")
    let hqje = val("steamqg") * 0.85 * val("gmsl")
    let zk = zj / hqje
    if (zk) {
      ele("zk").value = zk.toFixed(3)
    }
  }
</script>
